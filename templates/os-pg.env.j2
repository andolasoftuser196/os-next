# Durango-PG Environment Configuration
# Generated: {{ generated_date }}
# Domain: {{ domain }}

# ============================================
# Project Configuration
# ============================================
COMPOSE_PROJECT_NAME=durango-pg

# ============================================
# Port Configuration (Host Bindings)
# ============================================
# PRODUCTION: Set APP_BIND_IP=127.0.0.1 when behind reverse proxy (nginx/Apache)
# DEVELOPMENT/DIRECT ACCESS: Set APP_BIND_IP=0.0.0.0 (ensure firewall rules are in place)
APP_BIND_IP=127.0.0.1
APP_PORT=8080

# ============================================
# Database Configuration
# ============================================
DB_HOST=postgres16
DB_PORT=5432
DB_USERNAME=durango
# CRITICAL: Set a strong password before deployment!
DB_PASSWORD=durango
DB_NAME=durango

# ============================================
# Application Configuration
# ============================================
# Set to 'true' only for development/debugging
DEBUG=false

# Security salt for encryption and hashing (REQUIRED)
SECURITY_SALT={{ security_salt }}

# ============================================
# Cache Configuration
# ============================================
{% if services.redis_durango or services.memcached_durango %}
{% if services.redis_durango %}
CACHE_ENGINE=redis
{% else %}
CACHE_ENGINE=memcached
{% endif %}
{% else %}
CACHE_ENGINE=file
{% endif %}

# ============================================
# Queue Configuration
# ============================================
{% if services.redis_durango %}
QUEUE_ENGINE=redis
QUEUE_URL=redis://redis-durango:6379/0
{% else %}
QUEUE_ENGINE=database
{% endif %}

# Skip database migrations on startup
# SKIP_MIGRATIONS=1

# ============================================
# Redis Configuration
# ============================================
{% if services.redis_durango %}
REDIS_HOST=redis-durango
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_PREFIX=cake_
REDIS_TIMEOUT=1
REDIS_TLS_ENABLED=false
REDIS_TLS_VERIFY_PEER=false
{% endif %}

# ============================================
# Memcached Configuration
# ============================================
{% if services.memcached_durango %}
MEMCACHED_HOST=memcached-durango:11211
{% endif %}

# ============================================
# PHP Configuration
# ============================================
PHP_MEMORY_LIMIT=512M
PHP_POST_MAX_SIZE=200M
PHP_UPLOAD_MAX_FILESIZE=200M
PHP_MAX_EXECUTION_TIME=300
